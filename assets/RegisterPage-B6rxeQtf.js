import{u as A,r as l,j as e,c as f}from"./index-D2Fqy_f-.js";import{H as L,F as O}from"./Footer-BV4WgkCs.js";import{S as R}from"./StatusModal-CX9Q7jjd.js";import{u as T}from"./Azell_isologo-blanco-Du2hDwUS.js";import"./index-DF95_Aki.js";const V=()=>{const{t}=T(),y=A(),[a,b]=l.useState({email:"",firstName:"",country:"",city:"",phonePrefix:"MX",phoneNumber:"",password:"",confirmPassword:""}),[i,v]=l.useState({}),[h,w]=l.useState(!1),[g,z]=l.useState(!1),[d,N]=l.useState("register"),[u,j]=l.useState(""),[c,x]=l.useState(120),[p,m]=l.useState({isOpen:!1,title:"",message:"",type:"info"});l.useEffect(()=>{let s;return d==="verification"&&c>0&&(s=setInterval(()=>{x(r=>r-1)},1e3)),()=>clearInterval(s)},[d,c]);const C=s=>{const r=Math.floor(s/60),o=s%60;return`${r}:${o.toString().padStart(2,"0")}`},n=s=>{const{name:r,value:o}=s.target;if(!(r==="phoneNumber"&&(!/^\d*$/.test(o)||o.length>10))){if(r==="verificationCode"){if(!/^\d*$/.test(o)||o.length>8)return;j(o);return}b({...a,[r]:o}),i[r]&&v({...i,[r]:""})}},S=()=>{const s={};return/^(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*])(?=.{8,})/.test(a.password)||(s.password="La contraseña debe tener al menos 8 caracteres, una mayúscula, una minúscula y un carácter especial"),a.password!==a.confirmPassword&&(s.confirmPassword="Las contraseñas no coinciden"),a.phoneNumber.length!==10&&(s.phoneNumber="El teléfono debe tener 10 dígitos"),v(s),Object.keys(s).length===0},k=()=>{m({...p,isOpen:!1})},B=async s=>{if(s.preventDefault(),!!S())try{await f.getAuthRepository().register({email:a.email,name:a.firstName,phonePrefix:a.phonePrefix,phone:a.phoneNumber,country:a.country,city:a.city,password:a.password,tenantCode:"AZELL"}),N("verification"),x(120)}catch(r){console.error(r);let o="Error al registrar usuario";r.response&&r.response.data&&r.response.data.message?o=r.response.data.message:r instanceof Error&&(o=r.message),m({isOpen:!0,title:"Error de registro",message:o,type:"error"})}},P=async s=>{if(s.preventDefault(),u.length===8)try{await f.getAuthRepository().verify(a.email,u),m({isOpen:!0,title:"Verificación exitosa",message:"Cuenta creada y verificada correctamente",type:"success"}),setTimeout(()=>{y("/login")},2e3)}catch(r){console.error(r);let o="Error en verificación";r.response&&r.response.data&&r.response.data.message?o=r.response.data.message:r instanceof Error&&(o=r.message),m({isOpen:!0,title:"Error de verificación",message:o,type:"error"})}},M=async()=>{try{await f.getAuthRepository().resendCode(a.email),x(120),j(""),m({isOpen:!0,title:"Código reenviado",message:"Se ha enviado un nuevo código de verificación.",type:"success"})}catch(s){let r="Error al reenviar código";s.response&&s.response.data&&s.response.data.message&&(r=s.response.data.message),m({isOpen:!0,title:"Error",message:r,type:"error"})}},E=[{code:"+52",country:"MX",label:"(+52) MX"},{code:"+1",country:"USA",label:"(+1) USA"},{code:"+57",country:"CO",label:"(+57) CO"}];return e.jsxs("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e.jsx(L,{}),e.jsxs("main",{className:"az-split-container",children:[e.jsx("div",{className:"az-info-panel desktop-only",children:e.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[e.jsx("div",{style:{marginBottom:"2rem"},children:e.jsxs("span",{style:{display:"inline-block",padding:"0.25rem 0.75rem",backgroundColor:"rgba(56, 212, 48, 0.1)",color:"var(--color-brand-green)",borderRadius:"100px",fontSize:"0.8rem",fontWeight:"600",marginBottom:"1rem"},children:["● ",t("auth.secure_access","Acceso seguro")]})}),e.jsx("h1",{className:"az-heading-lg",children:t("auth.scaling_business","Escalando Negocios.")}),e.jsx("p",{className:"az-text-desc",children:t("auth.description","Azell es una plataforma financiera diseñada para gestionar inversiones con claridad, control y una experiencia moderna.")}),e.jsxs("div",{className:"az-feature-grid",children:[e.jsxs("div",{className:"az-feature-card",children:[e.jsx("span",{className:"az-feature-title",children:t("auth.features.title1","Rendimiento pactado")}),e.jsx("p",{className:"az-feature-text",children:t("auth.features.desc1","Productos estructurados...")})]}),e.jsxs("div",{className:"az-feature-card",children:[e.jsx("span",{className:"az-feature-title",children:t("auth.features.title2","Movimientos trazables")}),e.jsx("p",{className:"az-feature-text",children:t("auth.features.desc2","Seguimiento detallado...")})]}),e.jsxs("div",{className:"az-feature-card",children:[e.jsx("span",{className:"az-feature-title",children:t("auth.features.title3","Operación auditable")}),e.jsx("p",{className:"az-feature-text",children:t("auth.features.desc3","Controles y registros...")})]}),e.jsxs("div",{className:"az-feature-card",children:[e.jsx("span",{className:"az-feature-title",children:t("auth.features.title4","Experiencia premium")}),e.jsx("p",{className:"az-feature-text",children:t("auth.features.desc4","Interfaz limpia...")})]})]})]})}),e.jsx("div",{className:"az-form-panel",children:e.jsxs("div",{className:"az-card",children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",margin:"0 0 0.5rem 0"},children:d==="register"?t("auth.signup","Crear cuenta"):"Verificación"}),e.jsx("p",{style:{color:"var(--text-secondary)",margin:0,fontSize:"0.9rem"},children:d==="register"?t("auth.welcome_back","Bienvenido de nuevo"):"Ingresa el código de 8 dígitos enviado a tu correo/móvil."})]}),d==="register"?e.jsxs("form",{onSubmit:B,style:{width:"100%"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"az-label",children:t("auth.first_name","Nombre")}),e.jsx("input",{type:"text",name:"firstName",className:"az-input",placeholder:"",value:a.firstName,onChange:n,required:!0,style:{marginBottom:0}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"az-label",children:t("auth.phone_prefix","Prefijo")}),e.jsx("select",{name:"phonePrefix",className:"az-input",value:a.phonePrefix,onChange:n,style:{marginBottom:0},children:E.map(s=>e.jsx("option",{value:s.country,children:s.label},s.code))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"az-label",children:t("auth.phone","Teléfono")}),e.jsx("input",{type:"text",name:"phoneNumber",className:"az-input",placeholder:"3123456789",value:a.phoneNumber,onChange:n,required:!0,style:{marginBottom:0,borderColor:i.phoneNumber?"var(--color-error)":void 0}}),i.phoneNumber&&e.jsx("span",{style:{color:"var(--color-error)",fontSize:"0.8rem",marginTop:"0.25rem",display:"block"},children:i.phoneNumber})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"az-label",children:t("auth.email","Correo")}),e.jsx("input",{type:"email",name:"email",className:"az-input",placeholder:"john@example.com",value:a.email,onChange:n,required:!0,style:{marginBottom:0}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"az-label",children:t("auth.country","País")}),e.jsx("input",{type:"text",name:"country",className:"az-input",placeholder:"México",value:a.country,onChange:n,required:!0,style:{marginBottom:0}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"az-label",children:t("auth.city","Ciudad")}),e.jsx("input",{type:"text",name:"city",className:"az-input",placeholder:"CDMX",value:a.city,onChange:n,required:!0,style:{marginBottom:0}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"az-label",children:t("auth.password","Contraseña")}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:h?"text":"password",name:"password",className:"az-input",placeholder:"********",value:a.password,onChange:n,required:!0,style:{marginBottom:0,borderColor:i.password?"var(--color-error)":void 0,paddingRight:"2.5rem"}}),e.jsx("button",{type:"button",onClick:()=>w(!h),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)",display:"flex",alignItems:"center",padding:0},children:h?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"az-label",children:t("auth.confirm_password","Confirmar")}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:g?"text":"password",name:"confirmPassword",className:"az-input",placeholder:"********",value:a.confirmPassword,onChange:n,required:!0,style:{marginBottom:0,borderColor:i.confirmPassword?"var(--color-error)":void 0,paddingRight:"2.5rem"}}),e.jsx("button",{type:"button",onClick:()=>z(!g),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)",display:"flex",alignItems:"center",padding:0},children:g?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]})]}),(i.password||i.confirmPassword)&&e.jsxs("div",{style:{marginBottom:"1.5rem",marginTop:"-0.5rem"},children:[i.password&&e.jsxs("p",{style:{color:"var(--color-error)",fontSize:"0.8rem",margin:"0 0 0.25rem 0"},children:["• ",i.password]}),i.confirmPassword&&e.jsxs("p",{style:{color:"var(--color-error)",fontSize:"0.8rem",margin:0},children:["• ",i.confirmPassword]})]}),e.jsx("button",{type:"submit",className:"az-btn az-btn-primary",children:t("auth.continue","Continuar")})]}):e.jsxs("form",{onSubmit:P,style:{width:"100%"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[e.jsx("label",{className:"az-label",style:{textAlign:"center",marginBottom:"0.5rem"},children:"Código de verificación"}),e.jsx("input",{type:"text",name:"verificationCode",className:"az-input",placeholder:"12345678",value:u,onChange:n,maxLength:8,required:!0,style:{textAlign:"center",marginBottom:"1rem",letterSpacing:"0.5rem",fontSize:"1.25rem",fontWeight:"600"}}),e.jsx("div",{style:{color:c<30?"var(--color-error)":"var(--text-primary)",fontWeight:"600",fontSize:"1.25rem"},children:C(c)})]}),e.jsx("button",{type:"submit",className:"az-btn az-btn-primary",disabled:c===0||u.length!==8,style:{opacity:c===0||u.length!==8?.6:1},children:"Enviar código"}),c===0&&e.jsx("button",{type:"button",className:"az-btn",onClick:M,style:{marginTop:"1rem",backgroundColor:"transparent",border:"1px solid var(--border-color)",color:"var(--text-primary)"},children:"Volver a solicitar código"})]}),d==="register"&&e.jsxs("p",{style:{marginTop:"1.5rem",textAlign:"center",color:"var(--text-secondary)",fontSize:"0.9rem"},children:[t("auth.already_member","¿Ya tienes cuenta?")," ",e.jsx("span",{style:{color:"var(--accent-primary)",cursor:"pointer",fontWeight:"600"},onClick:()=>y("/login"),children:t("auth.login_now","Iniciar sesión")})]})]})})]}),e.jsx(O,{}),e.jsx(R,{isOpen:p.isOpen,onClose:k,title:p.title,message:p.message,type:p.type})]})};export{V as RegisterPage};
