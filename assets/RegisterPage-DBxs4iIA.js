import{u as E,r as l,j as e,c as f}from"./index-BKxVh_Sp.js";import{H as L,P as O,F as R}from"./Footer-DDC3bt3I.js";import{S as T}from"./StatusModal-BSOdPNJr.js";import{u as _}from"./Azell_isologo-blanco-Ci4e3o7d.js";import"./index-y9CQuyF_.js";const V=()=>{const{t}=_(),y=E(),[s,b]=l.useState({email:"",firstName:"",country:"",city:"",phonePrefix:"MX",phoneNumber:"",password:"",confirmPassword:""}),[n,v]=l.useState({}),[h,w]=l.useState(!1),[g,z]=l.useState(!1),[d,N]=l.useState("register"),[u,j]=l.useState(""),[c,x]=l.useState(120),[p,m]=l.useState({isOpen:!1,title:"",message:"",type:"info"});l.useEffect(()=>{let a;return d==="verification"&&c>0&&(a=setInterval(()=>{x(r=>r-1)},1e3)),()=>clearInterval(a)},[d,c]);const C=a=>{const r=Math.floor(a/60),o=a%60;return`${r}:${o.toString().padStart(2,"0")}`},i=a=>{const{name:r,value:o}=a.target;if(!(r==="phoneNumber"&&(!/^\d*$/.test(o)||o.length>10))){if(r==="verificationCode"){if(!/^\d*$/.test(o)||o.length>8)return;j(o);return}b({...s,[r]:o}),n[r]&&v({...n,[r]:""})}},S=()=>{const a={};return/^(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*])(?=.{8,})/.test(s.password)||(a.password="La contraseña debe tener al menos 8 caracteres, una mayúscula, una minúscula y un carácter especial"),s.password!==s.confirmPassword&&(a.confirmPassword="Las contraseñas no coinciden"),s.phoneNumber.length!==10&&(a.phoneNumber="El teléfono debe tener 10 dígitos"),v(a),Object.keys(a).length===0},k=()=>{m({...p,isOpen:!1})},P=async a=>{if(a.preventDefault(),!!S())try{await f.getAuthRepository().register({email:s.email,name:s.firstName,phonePrefix:s.phonePrefix,phone:s.phoneNumber,country:s.country,city:s.city,password:s.password,tenantCode:"AZELL"}),N("verification"),x(120)}catch(r){console.error(r);let o="Error al registrar usuario";r.response&&r.response.data&&r.response.data.message?o=r.response.data.message:r instanceof Error&&(o=r.message),m({isOpen:!0,title:"Error de registro",message:o,type:"error"})}},B=async a=>{if(a.preventDefault(),u.length===8)try{await f.getAuthRepository().verify(s.email,u),m({isOpen:!0,title:"Verificación exitosa",message:"Cuenta creada y verificada correctamente",type:"success"}),setTimeout(()=>{y("/login")},2e3)}catch(r){console.error(r);let o="Error en verificación";r.response&&r.response.data&&r.response.data.message?o=r.response.data.message:r instanceof Error&&(o=r.message),m({isOpen:!0,title:"Error de verificación",message:o,type:"error"})}},M=async()=>{try{await f.getAuthRepository().resendCode(s.email),x(120),j(""),m({isOpen:!0,title:"Código reenviado",message:"Se ha enviado un nuevo código de verificación.",type:"success"})}catch(a){let r="Error al reenviar código";a.response&&a.response.data&&a.response.data.message&&(r=a.response.data.message),m({isOpen:!0,title:"Error",message:r,type:"error"})}},A=[{code:"+52",country:"MX",label:"(+52) MX"},{code:"+1",country:"USA",label:"(+1) USA"},{code:"+57",country:"CO",label:"(+57) CO"}];return e.jsxs("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e.jsx(L,{}),e.jsxs("main",{className:"az-split-container",children:[e.jsx("div",{className:"az-info-panel",children:e.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[e.jsx("div",{style:{marginBottom:"2rem"},children:e.jsxs("span",{style:{display:"inline-block",padding:"0.25rem 0.75rem",backgroundColor:"rgba(56, 212, 48, 0.1)",color:"var(--color-brand-green)",borderRadius:"100px",fontSize:"0.8rem",fontWeight:"600",marginBottom:"1rem"},children:["● ",t("auth.secure_access","Acceso seguro")]})}),e.jsx("h1",{className:"az-heading-lg",children:t("auth.scaling_business","Escalando Negocios.")}),e.jsx("p",{className:"az-text-desc",children:t("auth.description","Azell es una plataforma financiera diseñada para gestionar inversiones con claridad, control y una experiencia moderna.")}),e.jsxs("div",{className:"az-feature-grid",children:[e.jsxs("div",{className:"az-feature-card",children:[e.jsx("span",{className:"az-feature-title",children:t("auth.features.title1","Rendimiento pactado")}),e.jsx("p",{className:"az-feature-text",children:t("auth.features.desc1","Productos estructurados...")})]}),e.jsxs("div",{className:"az-feature-card",children:[e.jsx("span",{className:"az-feature-title",children:t("auth.features.title2","Movimientos trazables")}),e.jsx("p",{className:"az-feature-text",children:t("auth.features.desc2","Seguimiento detallado...")})]}),e.jsxs("div",{className:"az-feature-card",children:[e.jsx("span",{className:"az-feature-title",children:t("auth.features.title3","Operación auditable")}),e.jsx("p",{className:"az-feature-text",children:t("auth.features.desc3","Controles y registros...")})]}),e.jsxs("div",{className:"az-feature-card",children:[e.jsx("span",{className:"az-feature-title",children:t("auth.features.title4","Experiencia premium")}),e.jsx("p",{className:"az-feature-text",children:t("auth.features.desc4","Interfaz limpia...")})]})]})]})}),e.jsx("div",{className:"az-form-panel",children:e.jsxs("div",{className:"az-card",children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",margin:"0 0 0.5rem 0"},children:d==="register"?t("auth.signup","Crear cuenta"):"Verificación"}),e.jsx("p",{style:{color:"var(--text-secondary)",margin:0,fontSize:"0.9rem"},children:d==="register"?t("auth.welcome_back","Bienvenido de nuevo"):"Ingresa el código de 8 dígitos enviado a tu correo/móvil."})]}),d==="register"?e.jsxs("form",{onSubmit:P,style:{width:"100%"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"az-label",children:t("auth.first_name","Nombre")}),e.jsx("input",{type:"text",name:"firstName",className:"az-input",placeholder:"",value:s.firstName,onChange:i,required:!0,style:{marginBottom:0}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"az-label",children:t("auth.phone_prefix","Prefijo")}),e.jsx("select",{name:"phonePrefix",className:"az-input",value:s.phonePrefix,onChange:i,style:{marginBottom:0},children:A.map(a=>e.jsx("option",{value:a.country,children:a.label},a.code))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"az-label",children:t("auth.phone","Teléfono")}),e.jsx("input",{type:"text",name:"phoneNumber",className:"az-input",placeholder:"3123456789",value:s.phoneNumber,onChange:i,required:!0,style:{marginBottom:0,borderColor:n.phoneNumber?"var(--color-error)":void 0}}),n.phoneNumber&&e.jsx("span",{style:{color:"var(--color-error)",fontSize:"0.8rem",marginTop:"0.25rem",display:"block"},children:n.phoneNumber})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"az-label",children:t("auth.email","Correo")}),e.jsx("input",{type:"email",name:"email",className:"az-input",placeholder:"john@example.com",value:s.email,onChange:i,required:!0,style:{marginBottom:0}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"az-label",children:t("auth.country","País")}),e.jsx("input",{type:"text",name:"country",className:"az-input",placeholder:"México",value:s.country,onChange:i,required:!0,style:{marginBottom:0}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"az-label",children:t("auth.city","Ciudad")}),e.jsx("input",{type:"text",name:"city",className:"az-input",placeholder:"CDMX",value:s.city,onChange:i,required:!0,style:{marginBottom:0}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"az-label",children:t("auth.password","Contraseña")}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:h?"text":"password",name:"password",className:"az-input",placeholder:"********",value:s.password,onChange:i,required:!0,style:{marginBottom:0,borderColor:n.password?"var(--color-error)":void 0,paddingRight:"2.5rem"}}),e.jsx("button",{type:"button",onClick:()=>w(!h),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)",display:"flex",alignItems:"center",padding:0},children:h?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"az-label",children:t("auth.confirm_password","Confirmar")}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:g?"text":"password",name:"confirmPassword",className:"az-input",placeholder:"********",value:s.confirmPassword,onChange:i,required:!0,style:{marginBottom:0,borderColor:n.confirmPassword?"var(--color-error)":void 0,paddingRight:"2.5rem"}}),e.jsx("button",{type:"button",onClick:()=>z(!g),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)",display:"flex",alignItems:"center",padding:0},children:g?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]})]}),(n.password||n.confirmPassword)&&e.jsxs("div",{style:{marginBottom:"1.5rem",marginTop:"-0.5rem"},children:[n.password&&e.jsxs("p",{style:{color:"var(--color-error)",fontSize:"0.8rem",margin:"0 0 0.25rem 0"},children:["• ",n.password]}),n.confirmPassword&&e.jsxs("p",{style:{color:"var(--color-error)",fontSize:"0.8rem",margin:0},children:["• ",n.confirmPassword]})]}),e.jsx("button",{type:"submit",className:"az-btn az-btn-primary",children:t("auth.continue","Continuar")})]}):e.jsxs("form",{onSubmit:B,style:{width:"100%"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[e.jsx("label",{className:"az-label",style:{textAlign:"center",marginBottom:"0.5rem"},children:"Código de verificación"}),e.jsx("input",{type:"text",name:"verificationCode",className:"az-input",placeholder:"12345678",value:u,onChange:i,maxLength:8,required:!0,style:{textAlign:"center",marginBottom:"1rem",letterSpacing:"0.5rem",fontSize:"1.25rem",fontWeight:"600"}}),e.jsx("div",{style:{color:c<30?"var(--color-error)":"var(--text-primary)",fontWeight:"600",fontSize:"1.25rem"},children:C(c)})]}),e.jsx("button",{type:"submit",className:"az-btn az-btn-primary",disabled:c===0||u.length!==8,style:{opacity:c===0||u.length!==8?.6:1},children:"Enviar código"}),c===0&&e.jsx("button",{type:"button",className:"az-btn",onClick:M,style:{marginTop:"1rem",backgroundColor:"transparent",border:"1px solid var(--border-color)",color:"var(--text-primary)"},children:"Volver a solicitar código"})]}),d==="register"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{style:{marginTop:"1.5rem",textAlign:"center",color:"var(--text-secondary)",fontSize:"0.9rem"},children:[t("auth.already_member","¿Ya tienes cuenta?")," ",e.jsx("span",{style:{color:"var(--accent-primary)",cursor:"pointer",fontWeight:"600"},onClick:()=>y("/login"),children:t("auth.login_now","Iniciar sesión")})]}),e.jsxs("p",{style:{marginTop:"0.5rem",textAlign:"center",color:"var(--text-secondary)",fontSize:"0.9rem"},children:[t("auth.privacy_prompt","Consulta nuestro")," ",e.jsx("a",{href:O,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--accent-primary)",cursor:"pointer",fontWeight:"600",textDecoration:"none"},children:t("auth.privacy_link","aviso de privacidad")})]})]})]})})]}),e.jsx(R,{}),e.jsx(T,{isOpen:p.isOpen,onClose:k,title:p.title,message:p.message,type:p.type})]})};export{V as RegisterPage};
